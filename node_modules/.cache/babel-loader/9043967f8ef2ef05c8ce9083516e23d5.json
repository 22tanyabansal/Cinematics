{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Dell\\\\Downloads\\\\React-Movie-App-main\\\\React-Movie-App-main\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\Users\\\\Dell\\\\Downloads\\\\React-Movie-App-main\\\\React-Movie-App-main\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Dell\\\\Downloads\\\\React-Movie-App-main\\\\React-Movie-App-main\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Dell\\\\Downloads\\\\React-Movie-App-main\\\\React-Movie-App-main\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import Pagination2 from\"../../components/Pagination/Pagination\";import LocalSearch from\"../../components/Search/LocalSearch\";import SingleData from\"../../components/SingleData/SingleData\";import Myloader from\"react-spinners/PuffLoader\";import Genre from\"../../components/Genres/Genre\";import useGenre from\"../../components/Genres/UseGenre\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Movies=function Movies(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),treadingContent=_useState2[0],setTreadingContent=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),numOfPages=_useState6[0],setNumOfPages=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchTerm=_useState8[0],setSearchTerm=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),filterGenre=_useState12[0],setFilterGenre=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),genreTitle=_useState14[0],setGenreTitle=_useState14[1];var _useState15=useState(\"grey\"),_useState16=_slicedToArray(_useState15,2),color=_useState16[0],setColor=_useState16[1];var genreforURL=useGenre(filterGenre);// fetch Movies from TMDB\nvar fetchMovieApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\" \\n      https://api.themoviedb.org/3/discover/movie?api_key=\".concat(process.env.REACT_APP_API_KEY,\"&page=\").concat(page,\"&language=en-US&sort_by=popularity.desc&with_genres=\").concat(genreforURL,\"\\n      \"));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTreadingContent(data.results);setNumOfPages(100);setIsLoading(true);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchMovieApi(){return _ref.apply(this,arguments);};}();var fetchSearchApi=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var SEARCH_API,_yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!searchTerm){_context2.next=9;break;}SEARCH_API=\"https://api.themoviedb.org/3/search/movie?api_key=\".concat(process.env.REACT_APP_API_KEY,\"&query=\").concat(searchTerm,\"&page=\").concat(page,\"&sort_by=popularity.desc&page=2\");_context2.next=4;return axios.get(SEARCH_API);case 4:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setTreadingContent(data.results);setNumOfPages(data.total_pages);setIsLoading(true);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchSearchApi(){return _ref2.apply(this,arguments);};}();useEffect(function(){window.scroll(0,0);if(searchTerm){fetchSearchApi();}else{fetchMovieApi();}return function(){setTreadingContent();};},[page,isLoading,genreforURL]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"main\",{className:\"all__movies\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my__main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"TreadingHome\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[genreTitle&&genreTitle.name,\" Movies:\"]})}),/*#__PURE__*/_jsx(LocalSearch,{setSearchTerm:setSearchTerm,searchTerm:searchTerm,fetchSearchApi:fetchSearchApi,numOfpages:numOfPages,setIsLoading:setIsLoading,media:\"movies\",placehold:\"Search Movies\",isLoading:isLoading,treadingContent:treadingContent})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sec__main \",children:[/*#__PURE__*/_jsx(\"span\",{className:\"all_genres \",children:/*#__PURE__*/_jsx(Genre,{media:\"movie\",setFilterGenre:setFilterGenre,filterGenre:filterGenre,setTreadingContent:setTreadingContent,setPage:setPage,numOfpages:numOfPages,page:page,genreTitle:genreTitle,setGenreTitle:setGenreTitle,treadingContent:treadingContent})}),/*#__PURE__*/_jsx(\"div\",{className:\"pag  \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ListContent\",children:isLoading&&treadingContent?treadingContent.map(function(n){return/*#__PURE__*/_jsx(SingleData,_objectSpread(_objectSpread({},n),{},{mediaType:\"movie\"}),n.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"loading  \",style:{display:\"flex\",height:\"450px\",justifyContent:\"center\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Myloader,{color:color,size:60}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"grey\",fontSize:\"13px\",marginLeft:\"10px\",marginTop:\"10px\"},children:\"fetching data ...\"})]})}),/*#__PURE__*/_jsx(Pagination2,{setPage:setPage,numOfPages:numOfPages,media:\"movies\",searchTerm:searchTerm,setIsLoading:setIsLoading,page:page})]})});};export default Movies;","map":{"version":3,"sources":["C:/Users/Dell/Downloads/React-Movie-App-main/React-Movie-App-main/src/pages/Movies/Movies.js"],"names":["axios","useEffect","useState","Pagination2","LocalSearch","SingleData","Myloader","Genre","useGenre","Movies","treadingContent","setTreadingContent","page","setPage","numOfPages","setNumOfPages","searchTerm","setSearchTerm","isLoading","setIsLoading","filterGenre","setFilterGenre","genreTitle","setGenreTitle","color","setColor","genreforURL","fetchMovieApi","get","process","env","REACT_APP_API_KEY","data","results","console","log","fetchSearchApi","SEARCH_API","total_pages","window","scroll","name","map","n","id","display","height","justifyContent","alignItems","fontSize","marginLeft","marginTop"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport Pagination2 from \"../../components/Pagination/Pagination\";\nimport LocalSearch from \"../../components/Search/LocalSearch\";\nimport SingleData from \"../../components/SingleData/SingleData\";\nimport Myloader from \"react-spinners/PuffLoader\";\nimport Genre from \"../../components/Genres/Genre\";\nimport useGenre from \"../../components/Genres/UseGenre\";\n\nconst Movies = () => {\n  const [treadingContent, setTreadingContent] = useState([]);\n  const [page, setPage] = useState(1);\n  const [numOfPages, setNumOfPages] = useState();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [filterGenre, setFilterGenre] = useState([]);\n  const [genreTitle, setGenreTitle] = useState();\n  const [color, setColor] = useState(\"grey\");\n  const genreforURL = useGenre(filterGenre);\n\n  // fetch Movies from TMDB\n  const fetchMovieApi = async () => {\n    try {\n      const { data } = await axios.get(\n        ` \n      https://api.themoviedb.org/3/discover/movie?api_key=${process.env.REACT_APP_API_KEY}&page=${page}&language=en-US&sort_by=popularity.desc&with_genres=${genreforURL}\n      `\n      );\n      setTreadingContent(data.results);\n      setNumOfPages(100);\n      setIsLoading(true);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const fetchSearchApi = async () => {\n    if (searchTerm) {\n      const SEARCH_API = `https://api.themoviedb.org/3/search/movie?api_key=${process.env.REACT_APP_API_KEY}&query=${searchTerm}&page=${page}&sort_by=popularity.desc&page=2`;\n      const { data } = await axios.get(SEARCH_API);\n      setTreadingContent(data.results);\n      setNumOfPages(data.total_pages);\n      setIsLoading(true);\n    }\n  };\n\n  useEffect(() => {\n    window.scroll(0, 0);\n    if (searchTerm) {\n      fetchSearchApi();\n    } else {\n      fetchMovieApi();\n    }\n    return () => {\n      setTreadingContent();\n    };\n  }, [page, isLoading, genreforURL]);\n\n  return (\n    <>\n      <main className=\"all__movies\">\n        <div className=\"my__main\">\n          <div className=\"TreadingHome\">\n            <h3>{genreTitle && genreTitle.name} Movies:</h3>\n          </div>\n          <LocalSearch\n            setSearchTerm={setSearchTerm}\n            searchTerm={searchTerm}\n            fetchSearchApi={fetchSearchApi}\n            numOfpages={numOfPages}\n            setIsLoading={setIsLoading}\n            media=\"movies\"\n            placehold=\"Search Movies\"\n            isLoading={isLoading}\n            treadingContent={treadingContent}\n          />\n        </div>\n        <div className=\"sec__main \">\n          <span className=\"all_genres \">\n            <Genre\n              media=\"movie\"\n              setFilterGenre={setFilterGenre}\n              filterGenre={filterGenre}\n              setTreadingContent={setTreadingContent}\n              setPage={setPage}\n              numOfpages={numOfPages}\n              page={page}\n              genreTitle={genreTitle}\n              setGenreTitle={setGenreTitle}\n              treadingContent={treadingContent}\n            />\n          </span>\n          <div className=\"pag  \">\n            {/* <Pagination2\n              setPage={setPage}\n              numOfPages={numOfPages}\n              media=\"movies\"\n              page={page}\n              setIsLoading={setIsLoading}\n              searchTerm={searchTerm}\n              style={{ marginBottom: \"10px\" }}\n            /> */}\n          </div>\n        </div>\n\n        <div className=\"ListContent\">\n          {isLoading && treadingContent ? (\n            treadingContent.map((n) => (\n              <SingleData key={n.id} {...n} mediaType=\"movie\" />\n            ))\n          ) : (\n            <div\n              className=\"loading  \"\n              style={{\n                display: \"flex\",\n                height: \"450px\",\n\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            >\n              <Myloader color={color} size={60} />\n              <p\n                style={{\n                  color: \"grey\",\n                  fontSize: \"13px\",\n                  marginLeft: \"10px\",\n                  marginTop: \"10px\",\n                }}\n              >\n                fetching data ...\n              </p>\n            </div>\n          )}\n        </div>\n        <Pagination2\n          setPage={setPage}\n          numOfPages={numOfPages}\n          media=\"movies\"\n          searchTerm={searchTerm}\n          setIsLoading={setIsLoading}\n          page={page}\n        />\n      </main>\n    </>\n  );\n};\n\nexport default Movies;\n"]},"metadata":{},"sourceType":"module"}